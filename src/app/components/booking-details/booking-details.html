<div class="container">
    <div class="row my-5">
         <app-step3 
          *ngIf="currentStep === 3"
          [carDetails]="carDetails"
          [bookingData]="bookingData"
          (prevStep)="onPrevStep()"
          (bookingComplete)="onBookingComplete()">
        </app-step3>
    <div class="car-details-header" [ngClass]="currentStep === 3 ?'step3':'col-12 col-md-5'">
      <div class="car-header"><div class="car-image">
          <img [src]="carDetails?.images[0] || 'img/car1.png'" [alt]="carDetails?.full_name" />
        </div>
        <h5 class="car-name">{{ carDetails?.full_name }}</h5>
      </div>
        
        <div class="car-info my-3">
          <div class="car-price">
            <span class="currency">EGP <span class="amount">{{ carDetails?.pricing.final_price | number }}</span></span>
            <span class="period">from {{ carDetails?.pricing.monthly_installment_formatted }}</span>
          </div>
          <div class="car-specs">
            <div class="spec-item">
              <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.2326 7.8179L15.8824 8.97513C14.9455 8.07612 13.7999 7.39321 12.5263 7.00696L13.0449 5.31167C14.6435 5.79741 16.0755 6.66929 17.2326 7.8179ZM18.0221 8.69739L16.6757 9.8514C17.4489 10.8364 18.006 11.8803 18.2743 13.1479L20.079 13.266C19.7837 11.5596 19.0596 9.99829 18.0221 8.69739ZM11.3709 6.74487L11.8939 5.03511C9.90088 4.68425 7.93898 4.927 6.19201 5.66552L6.9317 7.27767C8.32043 6.71769 9.77643 6.51812 11.3709 6.74487ZM12.8825 24.7295L12.1047 23.1019C7.48811 24.2447 2.24174 21.2345 1.77229 15.4384L0 15.4786C0.563672 23.205 7.8668 26.2886 12.8825 24.7295ZM1.79385 14.256C2.03643 11.5093 3.61494 9.14066 5.87391 7.80554L5.13164 6.18777C2.25469 7.81937 0.25166 10.8191 0.0128906 14.2964L1.79385 14.256ZM12.4538 16.4562L30 15.0974V14.6248L12.2174 13.3842C12.91 14.2721 12.9023 15.3153 12.4538 16.4563M11.922 14.8612C11.922 13.5925 10.5392 12.7953 9.43881 13.4297C8.33854 14.064 8.33854 15.6585 9.43881 16.2928C10.5392 16.9271 11.922 16.1299 11.922 14.8612Z" fill="#E02027"/>
</svg>

              <span>{{ carDetails?.performance.mileage.formate}}</span>
            </div>
            <div class="spec-item">
           <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.315 25C4.44833 25 3.71042 24.6958 3.10125 24.0875C2.49208 23.4808 2.1875 22.7433 2.1875 21.875C2.1875 21.1267 2.42583 20.4658 2.9025 19.8925C3.37917 19.3192 3.97417 18.9633 4.6875 18.825V11.175C3.97417 11.0375 3.37917 10.6821 2.9025 10.1087C2.42583 9.53458 2.1875 8.87333 2.1875 8.125C2.1875 7.25667 2.49125 6.51917 3.09875 5.9125C3.70542 5.30417 4.4425 5 5.31 5C6.1775 5 6.91542 5.30417 7.52375 5.9125C8.13208 6.52083 8.43667 7.25833 8.4375 8.125C8.4375 8.87333 8.19917 9.53458 7.7225 10.1087C7.24583 10.6821 6.65083 11.0379 5.9375 11.1762V14.375H14.375V11.175C13.6617 11.0375 13.0667 10.6821 12.59 10.1087C12.1133 9.53458 11.875 8.87333 11.875 8.125C11.875 7.25667 12.1788 6.51917 12.7863 5.9125C13.3929 5.30417 14.13 5 14.9975 5C15.865 5 16.6029 5.30417 17.2113 5.9125C17.8196 6.52083 18.1242 7.25833 18.125 8.125C18.125 8.87333 17.8867 9.53458 17.41 10.1087C16.9333 10.6821 16.3383 11.0379 15.625 11.1762V14.375H22.2125C22.7267 14.375 23.1675 14.1912 23.535 13.8237C23.9025 13.4554 24.0862 13.0142 24.0862 12.5V11.175C23.3737 11.0375 22.7787 10.6821 22.3013 10.1087C21.8246 9.53458 21.5862 8.87333 21.5862 8.125C21.5862 7.25667 21.89 6.51917 22.4975 5.9125C23.1042 5.30417 23.8412 5 24.7087 5C25.5763 5 26.3146 5.30417 26.9237 5.9125C27.5329 6.52083 27.8371 7.25833 27.8362 8.125C27.8362 8.87333 27.5979 9.53458 27.1213 10.1087C26.6446 10.6821 26.0496 11.0379 25.3362 11.1762V12.5C25.3362 13.3683 25.0325 14.1058 24.425 14.7125C23.8175 15.3208 23.08 15.625 22.2125 15.625H15.625V18.825C16.3383 18.9625 16.9333 19.3179 17.41 19.8913C17.8867 20.4654 18.125 21.1267 18.125 21.875C18.125 22.7433 17.8217 23.4808 17.215 24.0875C16.6075 24.6958 15.87 25 15.0025 25C14.135 25 13.3971 24.6958 12.7887 24.0875C12.1804 23.4792 11.8758 22.7417 11.875 21.875C11.875 21.1267 12.1133 20.4658 12.59 19.8925C13.0667 19.3192 13.6617 18.9633 14.375 18.825V15.625H5.9375V18.825C6.65083 18.9625 7.24583 19.3179 7.7225 19.8913C8.19917 20.4654 8.4375 21.1267 8.4375 21.875C8.4375 22.7433 8.13417 23.4808 7.5275 24.0875C6.92 24.6958 6.1825 25 5.315 25ZM5.3125 23.75C5.82667 23.75 6.26792 23.5662 6.63625 23.1987C7.00375 22.8304 7.1875 22.3892 7.1875 21.875C7.1875 21.3608 7.00375 20.9196 6.63625 20.5513C6.26792 20.1838 5.82667 20 5.3125 20C4.79833 20 4.35708 20.1838 3.98875 20.5513C3.62125 20.9196 3.4375 21.3608 3.4375 21.875C3.4375 22.3892 3.62125 22.8304 3.98875 23.1987C4.35708 23.5662 4.79833 23.75 5.3125 23.75ZM5.3125 10C5.82667 10 6.26792 9.81625 6.63625 9.44875C7.00375 9.08042 7.1875 8.63917 7.1875 8.125C7.1875 7.61083 7.00375 7.16958 6.63625 6.80125C6.26792 6.43375 5.82667 6.25 5.3125 6.25C4.79833 6.25 4.35708 6.43375 3.98875 6.80125C3.62125 7.16958 3.4375 7.61083 3.4375 8.125C3.4375 8.63917 3.62125 9.08042 3.98875 9.44875C4.35708 9.81625 4.79833 10 5.3125 10ZM15 23.75C15.5142 23.75 15.9554 23.5662 16.3237 23.1987C16.6912 22.8304 16.875 22.3892 16.875 21.875C16.875 21.3608 16.6912 20.9196 16.3237 20.5513C15.9563 20.1829 15.515 19.9992 15 20C14.485 20.0008 14.0437 20.1846 13.6763 20.5513C13.3088 20.9179 13.125 21.3592 13.125 21.875C13.125 22.3908 13.3088 22.8321 13.6763 23.1987C14.0446 23.5662 14.4858 23.75 15 23.75ZM15 10C15.5142 10 15.9554 9.81625 16.3237 9.44875C16.6912 9.08042 16.875 8.63917 16.875 8.125C16.875 7.61083 16.6912 7.16958 16.3237 6.80125C15.9554 6.43375 15.5142 6.25 15 6.25C14.4858 6.25 14.0446 6.43375 13.6763 6.80125C13.3079 7.16875 13.1242 7.61 13.125 8.125C13.1258 8.64 13.3096 9.08125 13.6763 9.44875C14.0446 9.81625 14.4858 10 15 10ZM24.7125 10C25.2267 10 25.6675 9.81625 26.035 9.44875C26.4025 9.08042 26.5862 8.63917 26.5862 8.125C26.5862 7.61083 26.4025 7.16958 26.035 6.80125C25.6675 6.43375 25.2262 6.25 24.7112 6.25C24.1962 6.25 23.7554 6.43375 23.3888 6.80125C23.0204 7.16958 22.8362 7.61083 22.8362 8.125C22.8362 8.63917 23.0204 9.08042 23.3888 9.44875C23.7563 9.81625 24.1971 10 24.7112 10" fill="#E02027"/>
</svg>


              <span>{{ carDetails?.model_year }}</span>
            </div>
            <div class="spec-item">
             <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5.315 25C4.44833 25 3.71042 24.6958 3.10125 24.0875C2.49208 23.4808 2.1875 22.7433 2.1875 21.875C2.1875 21.1267 2.42583 20.4658 2.9025 19.8925C3.37917 19.3192 3.97417 18.9633 4.6875 18.825V11.175C3.97417 11.0375 3.37917 10.6821 2.9025 10.1087C2.42583 9.53458 2.1875 8.87333 2.1875 8.125C2.1875 7.25667 2.49125 6.51917 3.09875 5.9125C3.70542 5.30417 4.4425 5 5.31 5C6.1775 5 6.91542 5.30417 7.52375 5.9125C8.13208 6.52083 8.43667 7.25833 8.4375 8.125C8.4375 8.87333 8.19917 9.53458 7.7225 10.1087C7.24583 10.6821 6.65083 11.0379 5.9375 11.1762V14.375H14.375V11.175C13.6617 11.0375 13.0667 10.6821 12.59 10.1087C12.1133 9.53458 11.875 8.87333 11.875 8.125C11.875 7.25667 12.1788 6.51917 12.7863 5.9125C13.3929 5.30417 14.13 5 14.9975 5C15.865 5 16.6029 5.30417 17.2113 5.9125C17.8196 6.52083 18.1242 7.25833 18.125 8.125C18.125 8.87333 17.8867 9.53458 17.41 10.1087C16.9333 10.6821 16.3383 11.0379 15.625 11.1762V14.375H22.2125C22.7267 14.375 23.1675 14.1912 23.535 13.8237C23.9025 13.4554 24.0862 13.0142 24.0862 12.5V11.175C23.3737 11.0375 22.7787 10.6821 22.3013 10.1087C21.8246 9.53458 21.5862 8.87333 21.5862 8.125C21.5862 7.25667 21.89 6.51917 22.4975 5.9125C23.1042 5.30417 23.8412 5 24.7087 5C25.5763 5 26.3146 5.30417 26.9237 5.9125C27.5329 6.52083 27.8371 7.25833 27.8362 8.125C27.8362 8.87333 27.5979 9.53458 27.1213 10.1087C26.6446 10.6821 26.0496 11.0379 25.3362 11.1762V12.5C25.3362 13.3683 25.0325 14.1058 24.425 14.7125C23.8175 15.3208 23.08 15.625 22.2125 15.625H15.625V18.825C16.3383 18.9625 16.9333 19.3179 17.41 19.8913C17.8867 20.4654 18.125 21.1267 18.125 21.875C18.125 22.7433 17.8217 23.4808 17.215 24.0875C16.6075 24.6958 15.87 25 15.0025 25C14.135 25 13.3971 24.6958 12.7887 24.0875C12.1804 23.4792 11.8758 22.7417 11.875 21.875C11.875 21.1267 12.1133 20.4658 12.59 19.8925C13.0667 19.3192 13.6617 18.9633 14.375 18.825V15.625H5.9375V18.825C6.65083 18.9625 7.24583 19.3179 7.7225 19.8913C8.19917 20.4654 8.4375 21.1267 8.4375 21.875C8.4375 22.7433 8.13417 23.4808 7.5275 24.0875C6.92 24.6958 6.1825 25 5.315 25ZM5.3125 23.75C5.82667 23.75 6.26792 23.5662 6.63625 23.1987C7.00375 22.8304 7.1875 22.3892 7.1875 21.875C7.1875 21.3608 7.00375 20.9196 6.63625 20.5513C6.26792 20.1838 5.82667 20 5.3125 20C4.79833 20 4.35708 20.1838 3.98875 20.5513C3.62125 20.9196 3.4375 21.3608 3.4375 21.875C3.4375 22.3892 3.62125 22.8304 3.98875 23.1987C4.35708 23.5662 4.79833 23.75 5.3125 23.75ZM5.3125 10C5.82667 10 6.26792 9.81625 6.63625 9.44875C7.00375 9.08042 7.1875 8.63917 7.1875 8.125C7.1875 7.61083 7.00375 7.16958 6.63625 6.80125C6.26792 6.43375 5.82667 6.25 5.3125 6.25C4.79833 6.25 4.35708 6.43375 3.98875 6.80125C3.62125 7.16958 3.4375 7.61083 3.4375 8.125C3.4375 8.63917 3.62125 9.08042 3.98875 9.44875C4.35708 9.81625 4.79833 10 5.3125 10ZM15 23.75C15.5142 23.75 15.9554 23.5662 16.3237 23.1987C16.6912 22.8304 16.875 22.3892 16.875 21.875C16.875 21.3608 16.6912 20.9196 16.3237 20.5513C15.9563 20.1829 15.515 19.9992 15 20C14.485 20.0008 14.0437 20.1846 13.6763 20.5513C13.3088 20.9179 13.125 21.3592 13.125 21.875C13.125 22.3908 13.3088 22.8321 13.6763 23.1987C14.0446 23.5662 14.4858 23.75 15 23.75ZM15 10C15.5142 10 15.9554 9.81625 16.3237 9.44875C16.6912 9.08042 16.875 8.63917 16.875 8.125C16.875 7.61083 16.6912 7.16958 16.3237 6.80125C15.9554 6.43375 15.5142 6.25 15 6.25C14.4858 6.25 14.0446 6.43375 13.6763 6.80125C13.3079 7.16875 13.1242 7.61 13.125 8.125C13.1258 8.64 13.3096 9.08125 13.6763 9.44875C14.0446 9.81625 14.4858 10 15 10ZM24.7125 10C25.2267 10 25.6675 9.81625 26.035 9.44875C26.4025 9.08042 26.5862 8.63917 26.5862 8.125C26.5862 7.61083 26.4025 7.16958 26.035 6.80125C25.6675 6.43375 25.2262 6.25 24.7112 6.25C24.1962 6.25 23.7554 6.43375 23.3888 6.80125C23.0204 7.16958 22.8362 7.61083 22.8362 8.125C22.8362 8.63917 23.0204 9.08042 23.3888 9.44875C23.7563 9.81625 24.1971 10 24.7112 10" fill="#E02027"/>
</svg>

              <span>{{ carDetails?.specifications.transmission_type.name }}</span>
            </div>
          </div>
        </div>
      </div>
<div class="col-12 col-md-7">
      <!-- Progress Bar -->
          @if(currentStep !== 3){
        <div class="progress-bar">
          <div class="progress-step start" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
            <div class="step-circle">
              <svg *ngIf="currentStep > 1" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19L21 7l-1.41-1.41z"/>
              </svg>
              <div *ngIf="currentStep <= 1" class="step-dot"></div>
            </div>
            <span class="step-label">Appointment</span>
            <div class="step-sublabel">Booking Details</div>
          </div>

          <div class="progress-line" [class.completed]="currentStep > 1"></div>

          <div class="progress-step end" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
            <div class="step-circle">
              <svg *ngIf="currentStep > 2" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19L21 7l-1.41-1.41z"/>
              </svg>
              <div *ngIf="currentStep <= 2" class="step-dot"></div>
            </div>
            <span class="step-label">Verification</span>
            <div class="step-sublabel">Verify your Mobile Number</div>
          </div>
        </div>
    }

      <!-- Car Details Header -->
      

      <!-- Step Content -->
      <div class="step-content">
        <app-step1 
          *ngIf="currentStep === 1"
          [carDetails]="carDetails"
          (nextStep)="onNextStep()"
          (stepData)="onStepData($event)">
        </app-step1>

        <app-step2 
          *ngIf="currentStep === 2"
          [carDetails]="carDetails"
          (nextStep)="onNextStep()"
          (prevStep)="onPrevStep()"
          (stepData)="onStepData($event)">
        </app-step2>

      </div>
    </div>
</div>
</div>